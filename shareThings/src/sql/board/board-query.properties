selectList=SELECT SUB.*, RV.* FROM (SELECT B.BNO, P.PNO, M.USER_NAME, B.BTITLE, B.BCOUNT, B.BDATE, B.REVIEW_STAR, A.ANO, A.CHANGE_NAME, A.FILE_PATH, P.PRICE, P.DEPOSIT, COUNT(RT.RT_NO) AS RTCOUNT FROM BOARD B JOIN MEMBER M ON(M.UNO = B.BWRITER) JOIN ATTACHMENT A ON (B.BNO = A.BNO) JOIN PRODUCT P ON (B.PNO = P.PNO) JOIN PSTATUS PS ON (P.SID = PS.SID) JOIN PCATEGORY CTG ON (P.CTG_ID = CTG.CTG_ID) LEFT JOIN RENTAL RT ON (P.PNO = RT.PNO) WHERE CTG.PARENT_CTGID = (SELECT CTG_ID FROM PCATEGORY WHERE CTG_NAME = ? AND CTG_LEVEL = 2) AND B.BTYPE = ? AND B.STATUS = 'Y' AND A.ATYPE = 'B' AND A.FILE_LEVEL = 0 AND PS.SID IN ('PS10', 'PS11', 'PS12', 'PS13', 'PS14', 'PS15') GROUP BY B.BNO, P.PNO, M.USER_NAME, B.BTITLE, B.BCOUNT, B.BDATE, B.REVIEW_STAR, A.ANO, A.CHANGE_NAME, A.FILE_PATH, P.PRICE, P.DEPOSIT) SUB LEFT JOIN (SELECT PARENT_BNO, NVL(COUNT(BNO), 0) AS RVCOUNT, NVL(ROUND(AVG(REVIEW_STAR), 1), 0) AS RVSTAR FROM BOARD RV WHERE BLEVEL = 0 AND BTYPE = ? GROUP BY PARENT_BNO) RV ON (SUB.BNO = RV.PARENT_BNO) ORDER BY 1 DESC
selectFilter=SELECT SUB.*, COUNT(RV.BNO) AS RVCOUNT, NVL(ROUND(AVG(RV.REVIEW_STAR), 1), 0) AS RVSTAR FROM (SELECT B.BNO, P.PNO, M.USER_NAME, B.BTITLE, B.BCOUNT, B.BDATE, B.REVIEW_STAR, A.ANO, A.CHANGE_NAME, A.FILE_PATH, P.PRICE, P.DEPOSIT, COUNT(RT.RT_NO) AS RTCOUNT FROM BOARD B JOIN MEMBER M ON(M.UNO = B.BWRITER) JOIN ATTACHMENT A ON (B.BNO = A.BNO) JOIN PRODUCT P ON (B.PNO = P.PNO) JOIN PSTATUS PS ON (P.SID = PS.SID) JOIN PCATEGORY CTG ON (P.CTG_ID = CTG.CTG_ID) LEFT JOIN RENTAL RT ON (P.PNO = RT.PNO) WHERE CTG.PARENT_CTGID = (SELECT CTG_ID FROM PCATEGORY WHERE CTG_NAME = ? AND CTG_LEVEL = 2) AND CTG.CTG_ID = (SELECT CTG_ID FROM PCATEGORY WHERE CTG_NAME = ? AND CTG_LEVEL = 3) AND P.PEND_DATE > ? AND P.PRICE BETWEEN ? AND ? AND B.BTYPE = ? AND B.STATUS = 'Y' AND A.ATYPE = 'B' AND A.FILE_LEVEL = 0 AND PS.SID IN ('PS10', 'PS11', 'PS12', 'PS13', 'PS14', 'PS15') GROUP BY B.BNO, P.PNO, M.USER_NAME, B.BTITLE, B.BCOUNT, B.BDATE, B.REVIEW_STAR, A.ANO, A.CHANGE_NAME, A.FILE_PATH, P.PRICE, P.DEPOSIT) SUB LEFT JOIN BOARD RV ON (RV.PARENT_BNO = SUB.BNO) GROUP BY SUB.BNO, SUB.PNO, SUB.USER_NAME, SUB.BTITLE, SUB.BCOUNT, SUB.BDATE, SUB.REVIEW_STAR, SUB.ANO, SUB.CHANGE_NAME, SUB.FILE_PATH, SUB.PRICE, SUB.DEPOSIT, SUB.RTCOUNT
selectFilterNoDate=SELECT SUB.*, COUNT(RV.BNO) AS RVCOUNT, NVL(ROUND(AVG(RV.REVIEW_STAR), 1), 0) AS RVSTAR FROM (SELECT B.BNO, P.PNO, M.USER_NAME, B.BTITLE, B.BCOUNT, B.BDATE, B.REVIEW_STAR, A.ANO, A.CHANGE_NAME, A.FILE_PATH, P.PRICE, P.DEPOSIT, COUNT(RT.RT_NO) AS RTCOUNT FROM BOARD B JOIN MEMBER M ON(M.UNO = B.BWRITER) JOIN ATTACHMENT A ON (B.BNO = A.BNO) JOIN PRODUCT P ON (B.PNO = P.PNO) JOIN PSTATUS PS ON (P.SID = PS.SID) JOIN PCATEGORY CTG ON (P.CTG_ID = CTG.CTG_ID) LEFT JOIN RENTAL RT ON (P.PNO = RT.PNO) WHERE CTG.PARENT_CTGID = (SELECT CTG_ID FROM PCATEGORY WHERE CTG_NAME = ? AND CTG_LEVEL = 2) AND CTG.CTG_ID = (SELECT CTG_ID FROM PCATEGORY WHERE CTG_NAME = ? AND CTG_LEVEL = 3) AND P.PRICE BETWEEN ? AND ? AND B.BTYPE = ? AND B.STATUS = 'Y' AND A.ATYPE = 'B' AND A.FILE_LEVEL = 0 AND PS.SID IN ('PS10', 'PS11', 'PS12', 'PS13', 'PS14', 'PS15') GROUP BY B.BNO, P.PNO, M.USER_NAME, B.BTITLE, B.BCOUNT, B.BDATE, B.REVIEW_STAR, A.ANO, A.CHANGE_NAME, A.FILE_PATH, P.PRICE, P.DEPOSIT) SUB LEFT JOIN BOARD RV ON (RV.PARENT_BNO = SUB.BNO) GROUP BY SUB.BNO, SUB.PNO, SUB.USER_NAME, SUB.BTITLE, SUB.BCOUNT, SUB.BDATE, SUB.REVIEW_STAR, SUB.ANO, SUB.CHANGE_NAME, SUB.FILE_PATH, SUB.PRICE, SUB.DEPOSIT, SUB.RTCOUNT
updatebCount=UPDATE BOARD SET BCOUNT = (SELECT BCOUNT FROM BOARD WHERE BNO = ?) + 1 WHERE BNO = ?
selectOneBoard=SELECT B.BNO, B.BTITLE, B.BCONTENT, M.USER_NAME, B.BCOUNT, B.BDATE, P.*, COUNT(Z.ZNO) ZZIMCOUNT FROM BOARD B JOIN MEMBER M ON(M.UNO = B.BWRITER) JOIN PRODUCT P ON (B.PNO = P.PNO) LEFT JOIN ZZIM Z ON (P.PNO = Z.PNO) WHERE B.BNO = ? GROUP BY B.BNO, B.BTITLE, B.BCONTENT, M.USER_NAME, B.BCOUNT, B.BDATE, P.PNO, P.UNO, P.PSTART_DATE, P.PEND_DATE, P.PRICE, P.DEPOSIT, P.DL_FREE_AMOUNT, P.MODEL, P.CTG_ID, P.PURCHASE_DATE, P.PURCHASE_PRICE, P.ASHISTORY, P.CONDITION, P.SID
selectBoardImages=SELECT A.ANO, A.ORIGIN_NAME, A.CHANGE_NAME, A.FILE_PATH, A.FILE_LEVEL, A.BNO FROM ATTACHMENT A JOIN BOARD B ON (B.BNO = A.BNO) WHERE B.BNO = ? ORDER BY A.FILE_LEVEL
selectbWritermap=SELECT PC.BWRITER, PC.LEVEL_NAME, PC.PCOUNT, NVL(RVC.RVCOUNT, 0) RVCOUNT FROM (SELECT B.BWRITER, B.BNO, COUNT(*) RVCOUNT FROM BOARD B LEFT JOIN BOARD RV ON (B.BNO = RV.PARENT_BNO) WHERE RV.BTYPE = ? AND B.BTYPE = ? GROUP BY B.BWRITER, B.BNO) RVC RIGHT JOIN (SELECT B.BWRITER, P.UNO, MLV.LEVEL_NAME, COUNT(P.PNO) PCOUNT FROM BOARD B JOIN PRODUCT P ON (P.PNO = B.PNO) JOIN MEMBER M ON (M.UNO = P.UNO) JOIN MLEVEL MLV ON (M.MEMBER_LEVEL = MLV.LEVEL_CODE) WHERE M.UNO = ? AND B.BTYPE= ? GROUP BY B.BWRITER, P.UNO, MLV.LEVEL_NAME) PC ON (PC.BWRITER = RVC.BWRITER)
selectQnAList=SELECT REF.*, REP.BNO ANSNO, REP.BTITLE ANSTITLE, REP.BCONTENT ANSCONTENT, REP.BWRITER ANSUNO, M.USER_NAME ANSWRITER, REP.BDATE ANSDATE, REP.MODIFY_DATE ANSMODIFY_DATE, REP.BLEVEL ANSLEVEL FROM (SELECT B.BNO, B.BTITLE, B.BCONTENT, B.BWRITER, M.USER_NAME, B.BDATE, B.MODIFY_DATE, B.BLEVEL FROM BOARD B JOIN MEMBER M ON (M.UNO = B.BWRITER) WHERE B.BTYPE = 'QnA' AND B.STATUS = 'Y' AND B.PARENT_BNO = ?) REF LEFT JOIN BOARD REP ON (REP.PARENT_BNO = REF.BNO) LEFT JOIN MEMBER M ON (M.UNO = REP.BWRITER) ORDER BY 1 DESC
selectReviewList=SELECT REF.*, REP.BNO ANSNO, REP.BTITLE ANSTITLE, REP.BCONTENT ANSCONTENT, REP.BWRITER ANSUNO, M.USER_NAME ANSWRITER, REP.BDATE ANSDATE, REP.MODIFY_DATE ANSMODIFY_DATE, REP.BLEVEL ANSLEVEL FROM (SELECT B.BNO, B.BTITLE, B.BCONTENT, B.BWRITER, M.USER_NAME, B.BDATE, B.MODIFY_DATE, B.BLEVEL, B.REVIEW_STAR FROM BOARD B JOIN MEMBER M ON (M.UNO = B.BWRITER) WHERE B.BTYPE = ? AND B.STATUS = 'Y' AND B.PARENT_BNO = ?) REF LEFT JOIN BOARD REP ON (REP.PARENT_BNO = REF.BNO) LEFT JOIN MEMBER M ON (M.UNO = REP.BWRITER) ORDER BY 1 DESC
insertQnA=INSERT INTO BOARD VALUES(SEQ_BNO.NEXTVAL, ?, SUBSTR(?, 1, 20), ?, ?, DEFAULT, SYSDATE, SYSDATE, 'QnA', ?, ?, NULL, DEFAULT)
insertReview=INSERT INTO BOARD VALUES(SEQ_BNO.NEXTVAL, ?, SUBSTR(?, 1, 20), ?, ?, DEFAULT, SYSDATE, SYSDATE, ?, ?, ?, ?, DEFAULT)
selectBnoCurrval=SELECT SEQ_BNO.CURRVAL FROM DUAL
insertReviewAtt=INSERT INTO ATTACHMENT VALUES(SEQ_ANO.NEXTVAL, ?, ?, ?, SYSDATE, ?, 'B', ?, NULL, NULL, NULL)
checkZzim=SELECT COUNT(*) FROM ZZIM WHERE PNO = ? AND UNO = ?
insertZzim=INSERT INTO ZZIM VALUES(SEQ_ZNO.NEXTVAL, ?, ?)
selectZzimCnt=SELECT COUNT(*) FROM ZZIM WHERE PNO = ? GROUP BY PNO
selectRentList=SELECT * FROM RENTAL WHERE PNO = ? AND RT_SID <> 'RTS3'
selectRreasonList=SELECT * FROM R_REASON
searchBoard=SELECT SUB.*, RV.* FROM (SELECT B.BNO, P.PNO, M.USER_NAME, B.BTITLE, B.BCOUNT, B.BDATE, A.ANO, A.CHANGE_NAME, A.FILE_PATH, A.FILE_LEVEL, PS.SID, P.PRICE, P.DEPOSIT, COUNT(RT.RT_NO) AS RTCOUNT FROM BOARD B JOIN MEMBER M ON(M.UNO = B.BWRITER) JOIN ATTACHMENT A ON (B.BNO = A.BNO) JOIN PRODUCT P ON (B.PNO = P.PNO) JOIN PSTATUS PS ON (P.SID = PS.SID) LEFT JOIN RENTAL RT ON (P.PNO = RT.PNO) WHERE B.BTYPE = ? AND B.STATUS = 'Y' AND A.ATYPE = 'B' AND A.FILE_LEVEL = 0 AND PS.SID IN ('PS10', 'PS11', 'PS12', 'PS13', 'PS14', 'PS15') AND B.BTITLE LIKE ? OR B.BCONTENT LIKE ? OR P.MODEL LIKE ? GROUP BY B.BNO, P.PNO, M.USER_NAME, B.BTITLE, B.BCOUNT, B.BDATE, A.ANO, A.CHANGE_NAME, A.FILE_PATH, A.FILE_LEVEL, PS.SID, P.PRICE, P.DEPOSIT) SUB LEFT JOIN (SELECT PARENT_BNO, NVL(COUNT(BNO), 0) AS RVCOUNT, NVL(ROUND(AVG(REVIEW_STAR), 1), 0) AS RVSTAR FROM BOARD RV WHERE BLEVEL = 0 AND BTYPE = ? GROUP BY PARENT_BNO) RV ON (SUB.BNO = RV.PARENT_BNO) WHERE FILE_LEVEL = 0 AND SID IN ('PS10', 'PS11', 'PS12', 'PS13', 'PS14', 'PS15') ORDER BY 1 DESC
getTop5List=SELECT ROWNUM RNUM, SUB.*, RV.* FROM (SELECT B.BNO, P.PNO, M.USER_NAME, B.BTITLE, B.BCOUNT, B.BDATE, A.ANO, A.CHANGE_NAME, A.FILE_PATH, P.PRICE, P.DEPOSIT, COUNT(RT.RT_NO) AS RTCOUNT FROM BOARD B JOIN MEMBER M ON(M.UNO = B.BWRITER) JOIN ATTACHMENT A ON (B.BNO = A.BNO) JOIN PRODUCT P ON (B.PNO = P.PNO) JOIN PSTATUS PS ON (P.SID = PS.SID) LEFT JOIN RENTAL RT ON (P.PNO = RT.PNO) WHERE B.BTYPE = ? AND B.STATUS = 'Y' AND A.ATYPE = 'B' AND A.FILE_LEVEL = 0 AND PS.SID IN ('PS10', 'PS11', 'PS12', 'PS13', 'PS14', 'PS15') GROUP BY B.BNO, P.PNO, M.USER_NAME, B.BTITLE, B.BCOUNT, B.BDATE, A.ANO, A.CHANGE_NAME, A.FILE_PATH, P.PRICE, P.DEPOSIT ORDER BY RTCOUNT DESC, BCOUNT DESC) SUB LEFT JOIN (SELECT PARENT_BNO, NVL(COUNT(BNO), 0) AS RVCOUNT, NVL(ROUND(AVG(REVIEW_STAR), 1), 0) AS RVSTAR FROM BOARD RV WHERE BLEVEL = 0 AND BTYPE = ? GROUP BY PARENT_BNO) RV ON (SUB.BNO = RV.PARENT_BNO) WHERE ROWNUM BETWEEN 1 AND 5
getCtgTop5List=SELECT ROWNUM RNUM, SUB.* FROM (SELECT B.BNO, A.ANO, A.CHANGE_NAME, P.PRICE, P.DEPOSIT, COUNT(RT.RT_NO) AS RTCOUNT FROM BOARD B JOIN ATTACHMENT A ON (B.BNO = A.BNO) JOIN PRODUCT P ON (B.PNO = P.PNO) JOIN PSTATUS PS ON (P.SID = PS.SID) LEFT JOIN RENTAL RT ON (P.PNO = RT.PNO) WHERE B.BTYPE = ? AND B.STATUS = 'Y' AND A.ATYPE = 'B' AND A.FILE_LEVEL = 0 AND PS.SID IN ('PS10', 'PS11', 'PS12', 'PS13', 'PS14', 'PS15') AND P.CTG_ID IN (SELECT CTG_ID FROM PCATEGORY WHERE PARENT_CTGID IN (SELECT CTG_ID FROM PCATEGORY WHERE PARENT_CTGID = ?)) GROUP BY B.BNO, A.ANO, A.CHANGE_NAME, P.PRICE, P.DEPOSIT ORDER BY RTCOUNT DESC, BNO DESC) SUB WHERE ROWNUM BETWEEN 1 AND 5




!----- joon ----
insertThumb=INSERT INTO BOARD VALUES (SEQ_BNO.NEXTVAL, ?, ?, ?, ?, DEFAULT, SYSDATE, SYSDATE, ?, NULL, 0, NULL, 'Y')
selectCurrval=SELECT SEQ_BNO.CURRVAL FROM DUAL
insertAttachment=INSERT INTO ATTACHMENT VALUES(SEQ_ANO.NEXTVAL, ?, ?, ?, SYSDATE, 0, 'B', ?, NULL, NULL, NULL)